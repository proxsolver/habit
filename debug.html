<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Console Module</title>
    <style>
        /* ë””ë²„ê·¸ ì½˜ì†” ìŠ¤íƒ€ì¼ */
        .debug-console {
            position: fixed;
            top: 10%;
            left: 5%;
            right: 5%;
            bottom: 20%;
            background: rgba(0, 0, 0, 0.9);
            color: #00ff00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border-radius: 12px; /* var(--radius) */
            padding: 1rem;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1); /* var(--shadow-xl) */
        }

        .debug-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #333;
        }

        .debug-close {
            background: none;
            border: none;
            color: #ff6b6b;
            font-size: 1.5rem;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-touch-callout: none;
            width: 2rem; /* min-height: 44px for touch */
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .debug-close:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        .debug-close:active {
            transform: scale(0.95);
        }

        .debug-messages {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem 0;
        }

        .debug-entry {
            margin-bottom: 0.5rem;
            word-break: break-all;
        }

        .debug-time {
            color: #666;
            font-size: 10px;
        }

        .debug-entry.debug-error { color: #ff6b6b; }
        .debug-entry.debug-warning { color: #feca57; }
        .debug-entry.debug-success { color: #48cae4; }
        .debug-entry.debug-info { color: #00ff00; }

        .debug-clear {
            background: #333;
            color: white;
            border: none;
            padding: 0.5rem;
            margin-top: 0.5rem;
            border-radius: 4px;
            cursor: pointer;
            touch-action: manipulation;
            -webkit-touch-callout: none;
            min-height: 44px; /* For touch target */
        }
        .debug-clear:hover {
            background: #555;
        }
        .debug-clear:active {
            transform: scale(0.98);
        }

        /* ë””ë²„ê·¸ í† ê¸€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .debug-toggle {
            position: fixed;
            top: 1rem;
            left: 1rem;
            width: 4rem;
            height: 4rem;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: 3px solid white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 9999;
            transition: all 0.3s;
            touch-action: manipulation;
            -webkit-touch-callout: none;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: pulse 2s infinite;
        }

        .debug-toggle:hover {
            background: linear-gradient(135deg, #ee5a24, #ff6b6b);
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6);
        }

        .debug-toggle:active {
            transform: scale(0.95);
        }

        /* ê°„ë‹¨í•œ ìƒíƒœ í‘œì‹œê¸° ìŠ¤íƒ€ì¼ */
        .status-indicator {
            position: fixed;
            bottom: 8rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 2rem;
            font-size: 0.875rem;
            z-index: 9998;
            animation: fadeInUp 0.3s ease-out;
        }

        /* ê³µí†µ ì• ë‹ˆë©”ì´ì…˜ í‚¤í”„ë ˆì„ (í•„ìš”ì‹œ ë©”ì¸ ì•±ê³¼ ê³µìœ ) */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 480px) {
            .debug-toggle {
                top: 1rem;
                left: 0.5rem;
                width: 2.5rem;
                height: 2.5rem;
                font-size: 1.25rem;
            }

            .debug-console {
                top: 5%;
                left: 2%;
                right: 2%;
                bottom: 15%;
            }
        }
        @media (pointer: coarse) {
            .debug-toggle, .debug-close, .debug-clear {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <!-- ë””ë²„ê·¸ ì½˜ì†” -->
    <div id="debugConsole" class="debug-console hidden">
        <div class="debug-header">
            <span>ğŸ› ë””ë²„ê·¸ ë¡œê·¸</span>
            <button class="debug-close" id="debugCloseBtn">Ã—</button>
        </div>
        <div id="debugMessages" class="debug-messages"></div>
        <button class="debug-clear" id="debugClearBtn">ë¡œê·¸ ì§€ìš°ê¸°</button>
    </div>

    <!-- ë””ë²„ê·¸ í† ê¸€ ë²„íŠ¼ -->
    <div id="debugToggle" class="debug-toggle">
        ğŸ›
    </div>

    <!-- ê°„ë‹¨í•œ ìƒíƒœ í‘œì‹œê¸° -->
    <div id="statusIndicator" class="status-indicator hidden">
        <div id="statusText">ìƒíƒœ í™•ì¸ ì¤‘...</div>
    </div>

    <script>
        // ì´ ëª¨ë“ˆì€ ë©”ì¸ HTML íŒŒì¼ì— ì§ì ‘ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
        // ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë©°, ë©”ì¸ ì•±ì˜ ì „ì—­ ë³€ìˆ˜ (ì˜ˆ: `debugEnabled`)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

        let debugEnabled = false; // ë©”ì¸ ì•±ì—ì„œ ì´ ë³€ìˆ˜ë¥¼ ì œì–´í•©ë‹ˆë‹¤.

        // ë””ë²„ê·¸ ë¡œê¹… í•¨ìˆ˜
        function debugLog(message, type = 'info') {
            console.log(message);
            
            if (debugEnabled) {
                const debugMessages = document.getElementById('debugMessages');
                if (debugMessages) {
                    const timestamp = new Date().toLocaleTimeString();
                    const logEntry = document.createElement('div');
                    logEntry.className = `debug-entry debug-${type}`;
                    logEntry.innerHTML = `<span class="debug-time">${timestamp}</span> ${message}`;
                    
                    debugMessages.appendChild(logEntry);
                    debugMessages.scrollTop = debugMessages.scrollHeight;
                    
                    // ìµœëŒ€ 100ê°œ ë©”ì‹œì§€ë§Œ ìœ ì§€
                    if (debugMessages.children.length > 100) {
                        debugMessages.removeChild(debugMessages.firstChild);
                    }
                }
            }
        }

        // ë””ë²„ê·¸ ì½˜ì†” í† ê¸€
        function toggleDebugConsole() {
            debugLog('ğŸ”„ ë””ë²„ê·¸ ì½˜ì†” í† ê¸€ ì‹œë„', 'info');
            
            const debugConsole = document.getElementById('debugConsole');
            const debugToggle = document.getElementById('debugToggle');
            
            if (!debugConsole || !debugToggle) {
                debugLog('âŒ ë””ë²„ê·¸ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }
            
            if (debugConsole.classList.contains('hidden')) {
                debugConsole.classList.remove('hidden');
                debugToggle.style.display = 'none';
                debugEnabled = true; // ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”
                debugLog('ğŸ› ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”', 'success');
                showStatus('ë””ë²„ê·¸ ëª¨ë“œ ON', 2000);
            } else {
                debugConsole.classList.add('hidden');
                debugToggle.style.display = 'block';
                debugEnabled = false; // ë””ë²„ê·¸ ëª¨ë“œ ë¹„í™œì„±í™”
                debugLog('ğŸ› ë””ë²„ê·¸ ëª¨ë“œ ë¹„í™œì„±í™”', 'info');
                showStatus('ë””ë²„ê·¸ ëª¨ë“œ OFF', 2000);
            }
        }

        // ë””ë²„ê·¸ ë¡œê·¸ ì§€ìš°ê¸°
        function clearDebugLog() {
            const debugMessages = document.getElementById('debugMessages');
            if (debugMessages) {
                debugMessages.innerHTML = '';
            }
            debugLog('ğŸ§¹ ë¡œê·¸ ì§€ì›Œì§', 'info');
        }

        // ìƒíƒœ í‘œì‹œ
        function showStatus(message, duration = 3000) {
            const statusIndicator = document.getElementById('statusIndicator');
            const statusText = document.getElementById('statusText');
            
            if (statusIndicator && statusText) {
                statusText.textContent = message;
                statusIndicator.classList.remove('hidden');
                
                setTimeout(() => {
                    statusIndicator.classList.add('hidden');
                }, duration);
            }
        }

        // í„°ì¹˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ í•¨ìˆ˜ (ë””ë²„ê·¸ ë²„íŠ¼ìš©)
        function addTouchEventListener(element, callback, useCapture = false) {
            if (!element) {
                // debugLog('âŒ í„°ì¹˜ ì´ë²¤íŠ¸ ì¶”ê°€ ì‹¤íŒ¨: ìš”ì†Œê°€ ì—†ìŒ', 'error'); // ë„ˆë¬´ ë§ì€ ë¡œê·¸ ë°©ì§€
                return;
            }

            const elementInfo = element.id || element.className || element.tagName;

            element.addEventListener('touchstart', function(e) {
                e.preventDefault();
                this.style.transform = 'scale(0.98)';
            }, { passive: false, capture: useCapture });

            element.addEventListener('touchend', function(e) {
                e.preventDefault();
                e.stopPropagation();
                this.style.transform = '';
                callback.call(this, e);
            }, { passive: false, capture: useCapture });

            element.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                callback.call(this, e);
            }, { capture: useCapture });
        }

        // DOM ë¡œë“œ í›„ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²° (ì´ íŒŒì¼ì´ ì§ì ‘ ì‹¤í–‰ë  ë•Œ)
        document.addEventListener('DOMContentLoaded', function() {
            const debugToggle = document.getElementById('debugToggle');
            const debugCloseBtn = document.getElementById('debugCloseBtn');
            const debugClearBtn = document.getElementById('debugClearBtn');

            if (debugToggle) {
                addTouchEventListener(debugToggle, toggleDebugConsole);
            }
            if (debugCloseBtn) addTouchEventListener(debugCloseBtn, toggleDebugConsole);
            if (debugClearBtn) addTouchEventListener(debugClearBtn, clearDebugLog);

            // ì´ˆê¸° ë””ë²„ê·¸ ëª¨ë“œ ì„¤ì • (í•„ìš”ì‹œ ë©”ì¸ ì•±ì—ì„œ ì¬ì •ì˜)
            debugEnabled = false; 
            // debugLog('ğŸ› Debug module loaded. Initializing with debugEnabled = ' + debugEnabled, 'info');
        });
    </script>
</body>
</html>
