      /* 전역 스타일 */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }
    :root {

        --primary: #6366f1;
        --primary-dark: #4f46e5;
        --secondary: #ec4899;
        --accent: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;
        --success: #10b981;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        --radius: 12px;
        --radius-lg: 16px;
        --touch-target-min: 44px;
        
        /* 시간대별 색상 */
        --morning-gradient: linear-gradient(135deg, #fef3c7, #fde68a);
        --morning-border: #f59e0b;
        --afternoon-gradient: linear-gradient(135deg, #dbeafe, #bfdbfe);
        --afternoon-border: #3b82f6;
        --evening-gradient: linear-gradient(135deg, #e0e7ff, #c7d2fe);
        --evening-border: #6366f1;
        
        /* 루틴 타입별 색상 */
        --type-yesno: #10b981;
        --type-number: #f59e0b;
        --type-time: #8b5cf6;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        min-height: 100vh;
        color: var(--text-primary);
        font-size: 16px;
        line-height: 1.6;
        overflow-x: hidden;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }

    .container {
        max-width: 480px;
        margin: 0 auto;
        min-height: 100vh;
        background: #ffffff;
        position: relative;
        overflow-x: hidden;
        box-shadow: 0 0 50px rgba(0, 0, 0, 0.1);
        padding: 1.5rem;
    }

    /* 애니메이션 키프레임 */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
    }

    @keyframes bounce {
        0%, 20%, 53%, 80%, 100% { transform: scale(1); }
        40%, 43% { transform: scale(1.2); }
        70% { transform: scale(1.1); }
        90% { transform: scale(1.05); }
    }

    @keyframes confetti {
        0% { transform: scale(0) rotate(0deg); opacity: 1; }
        50% { transform: scale(1.2) rotate(180deg); opacity: 0.8; }
        100% { transform: scale(0) rotate(360deg); opacity: 0; }
    }

    @keyframes slideInRight {
        from {
            opacity: 0;
            transform: translateX(30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes glow {
        0%, 100% { box-shadow: 0 0 5px rgba(99, 102, 241, 0.3); }
        50% { box-shadow: 0 0 20px rgba(99, 102, 241, 0.6); }
    }

    @keyframes progressFill {
        from { width: 0%; }
        to { width: var(--progress-width); }
    }

    /* 섹션 카드 스타일 */
    .section-card {
        background: linear-gradient(145deg, #ffffff, #f8fafc);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-lg);
        border: 1px solid rgba(255, 255, 255, 0.8);
        position: relative;
        overflow: hidden;
    }

    .section-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary);
        border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    }

    .section-card.morning::before {
        background: linear-gradient(90deg, #fbbf24, #f59e0b);
    }

    .section-card.afternoon::before {
        background: linear-gradient(90deg, #60a5fa, #3b82f6);
    }

    .section-card.evening::before {
        background: linear-gradient(90deg, #a78bfa, #8b5cf6);
    }

    .section-card h2 {
        margin: 0 0 1rem 0;
        color: var(--text-primary);
        font-size: 1.25rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .section-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .section-progress {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.8rem;
        color: var(--text-secondary);
    }

    /* 전체 진행률 표시 */
    .daily-progress {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-xl);
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .daily-progress::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: pulse 3s infinite;
    }

    .progress-content {
        position: relative;
        z-index: 1;
    }

    .progress-percentage {
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .progress-label {
        font-size: 1rem;
        opacity: 0.9;
        margin-bottom: 1rem;
    }

    .progress-bar-container {
        background: rgba(255, 255, 255, 0.2);
        height: 8px;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 1rem;
    }

    .progress-bar-fill {
        background: linear-gradient(90deg, #10b981, #34d399);
        height: 100%;
        border-radius: 4px;
        transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        animation: progressFill 1.5s ease-out;
    }

    /* === 개선된 루틴 아이템 스타일 === */
    .routine-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

/* ▼▼▼ 2025-08-28 CSS 구문 오류(불필요한 괄호) 수정 ▼▼▼ */
.routine-item {
    display: flex;
    flex-direction: column; /* ★핵심: 헤더와 바디를 수직으로 쌓음 */
    padding: 12px 15px;
    gap: 10px; /* 헤더와 바디 사이의 간격 */
    position: relative;
    border: 2px solid var(--gray-200);
    border-radius: var(--radius);
    background: white;
    transition: all 0.2s ease-in-out;
}

.routine-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    border-color: var(--primary);
}

.routine-item.completed {
    border-color: var(--success);
    background: #f0fdf4;
}

.routine-header {
    font-size: 1.1rem;
    font-weight: 700;
    word-break: keep-all;
    line-height: 1.4;
    padding-left: 20px;
    padding-right: 20px;
}
/* --- 바로 위 중괄호(})가 닫힌 후 여기에 있던 불필요한 '}'를 제거했습니다. --- */

.routine-body {
    display: flex;
    justify-content: space-between; /* 좌측과 우측 영역을 양 끝으로 분리 */
    align-items: center;
}

.routine-actions {
    display: flex;
    align-items: center;
    gap: 12px;
}

.routine-meta-info {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-secondary);
}

.type-icon {
    font-size: 1.1rem;
}

.time-period, .frequency-badge {
    font-size: 0.8rem;
}

.routine-value {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    white-space: nowrap;
}

.routine-checkbox {
    width: 38px;
    height: 38px;
    margin-right: 0;
}
/* ▲▲▲ 여기까지 2025-08-28 CSS 구문 오류(불필요한 괄호) 수정 ▲▲▲ */

    /* 체크박스 및 액션 버튼 */
    .routine-checkbox, .routine-action-button {
        width: var(--touch-target-min);
        height: var(--touch-target-min);
        margin-right: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        flex-shrink: 0;
        border: 3px solid var(--gray-300);
        box-sizing: border-box;
        font-size: 1.2rem;
        color: var(--gray-400);
        background: white;
        position: relative;
        overflow: hidden;
    }

    .routine-checkbox::before, .routine-action-button::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(99, 102, 241, 0.3) 0%, transparent 70%);
        transition: all 0.3s ease;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    .routine-checkbox:hover::before, .routine-action-button:hover::before {
        width: 100%;
        height: 100%;
    }

    .routine-checkbox:hover, .routine-action-button:hover {
        border-color: var(--primary);
        color: var(--primary);
        transform: scale(1.1);
        animation: glow 1s infinite;
    }

    /* 루틴 타입별 체크박스 색상 */
    .routine-item[data-type="yesno"] .routine-checkbox:hover,
    .routine-item[data-type="yesno"] .routine-action-button:hover {
        border-color: var(--type-yesno);
        color: var(--type-yesno);
    }

    .routine-item[data-type="number"] .routine-checkbox:hover,
    .routine-item[data-type="number"] .routine-action-button:hover {
        border-color: var(--type-number);
        color: var(--type-number);
    }

    .routine-item[data-type="time"] .routine-checkbox:hover,
    .routine-item[data-type="time"] .routine-action-button:hover {
        border-color: var(--type-time);
        color: var(--type-time);
    }

    /* 완료된 루틴의 체크박스 */
    .routine-item.completed .routine-checkbox {
        background: linear-gradient(135deg, var(--success), #34d399);
        border-color: var(--success);
        color: white;
        animation: bounce 0.6s ease-out;
    }

    /* 건너뛴 루틴의 체크박스 */
    .routine-item.skipped .routine-checkbox,
    .routine-item.skipped .routine-action-button {
        background: linear-gradient(135deg, var(--error), #f87171);
        border-color: var(--error);
        color: white;
    }

    /* 루틴 내용 영역 */
    .routine-content {
        flex-grow: 1;
        margin-right: 1rem;
        display: flex;
        flex-direction: column;
        min-width: 0;
    }

    .routine-name {
        font-weight: 600;
        font-size: 1.05rem;
        color: var(--text-primary);
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .routine-details {
        font-size: 0.8rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .time-period {
        display: flex;
        align-items: center;
        gap: 0.25rem;
        font-weight: 500;
    }

    .frequency-badge {
        background: rgba(99, 102, 241, 0.1);
        color: var(--primary);
        padding: 0.125rem 0.5rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 0.7rem;
    }

    /* 루틴 값 표시 */
    .routine-value {
        font-weight: 600;
        font-size: 0.9rem;
        color: var(--text-primary);
        text-align: right;
        min-width: 60px;
    }

    .routine-item.completed .routine-value {
        color: var(--success);
    }

    .routine-item.skipped .routine-value {
        color: var(--error);
    }

    /* 스트릭 배지 */
    .streak-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: linear-gradient(135deg, #ff6b6b, #ff8787, #ffa8a8);
        color: white;
        border-radius: 16px;
        padding: 0.3rem 0.6rem;
        font-size: 0.7rem;
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 0.25rem;
        box-shadow: var(--shadow-lg);
        animation: pulse 2s infinite;
        border: 2px solid white;
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

    .streak-badge.high-streak {
        background: linear-gradient(135deg, #f59e0b, #fbbf24, #fde047);
        animation: glow 2s infinite;
    }

    .streak-badge.mega-streak {
        background: linear-gradient(135deg, #8b5cf6, #a78bfa, #c4b5fd);
        animation: bounce 1s infinite;
    }

    /* 지속 업데이트 배지 */
    .continuous-badge {
        position: absolute;
        top: -8px;
        left: -8px;
        background: linear-gradient(135deg, #06b6d4, #0891b2);
        color: white;
        border-radius: 16px;
        padding: 0.3rem 0.6rem;
        font-size: 0.7rem;
        font-weight: 800;
        display: flex;
        align-items: center;
        gap: 0.25rem;
        box-shadow: var(--shadow-lg);
        border: 2px solid white;
        text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    }

/* ▼▼▼ 08/19(수정일) 루틴 타입 아이콘 여백 수정 ▼▼▼ */
    .type-icon {
        font-size: 1.1rem;
    }

    .time-period, .frequency-badge {
        font-size: 0.8rem;
    }
    
/* ▲▲▲ 여기까지 08/19(수정일) 루틴 타입 아이콘 여백 수정 ▲▲▲ */

    .routine-item:hover .type-icon {
        opacity: 1;
        transform: scale(1.1);
    }

    /* 빈 상태 개선 */
    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        color: var(--text-secondary);
        background: linear-gradient(145deg, #f8fafc, #f1f5f9);
        border-radius: var(--radius-lg);
        border: 2px dashed var(--gray-300);
        margin: 2rem 0;
    }

    .empty-state-icon {
        font-size: 5rem;
        margin-bottom: 1.5rem;
        opacity: 0.6;
        background: linear-gradient(135deg, #667eea, #764ba2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: pulse 3s infinite;
    }

    .empty-state-title {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 0.75rem;
        color: var(--text-primary);
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .empty-state-description {
        font-size: 1rem;
        max-width: 350px;
        margin: 0 auto;
        line-height: 1.6;
    }

    /* 완료 축하 효과 */
    .completion-effect {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 1000;
    }

    .confetti-piece {
        position: absolute;
        width: 10px;
        height: 10px;
        background: var(--primary);
        animation: confetti 1s ease-out forwards;
    }

    .confetti-piece:nth-child(2n) {
        background: var(--secondary);
        animation-delay: 0.1s;
    }

    .confetti-piece:nth-child(3n) {
        background: var(--success);
        animation-delay: 0.2s;
    }

    .confetti-piece:nth-child(4n) {
        background: var(--warning);
        animation-delay: 0.3s;
    }

    /* 시간대별 섹션 헤더 강화 */
    .time-section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1rem 0 0.5rem 0;
        margin-top: 1.5rem;
        border-bottom: 2px solid var(--gray-200);
    }

    .time-section-title {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--text-primary);
    }

    .time-section-badge {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 2rem;
        font-size: 0.75rem;
        font-weight: 600;
    }

    /* 알림 디자인 개선 */
    .notification {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, var(--success), #34d399);
        color: white;
        padding: 1rem 1.5rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow-xl);
        z-index: 1000;
        animation: slideInRight 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

/* ▼▼▼ 08/09(수정일) 알림 아이콘 중복 제거 ▼▼▼ */
    .notification::before {
        /* content: '✅'; <-- 이 줄을 삭제하거나 주석 처리합니다. */
        font-size: 1.2rem;
    }

    .notification.error::before {
        content: '❌'; /* 에러와 경고는 유지하거나 필요시 삭제 가능 */
    }

    .notification.warning::before {
        content: '⚠️'; /* 에러와 경고는 유지하거나 필요시 삭제 가능 */
    }
/* ▲▲▲ 여기까지 08/09(수정일) 알림 아이콘 중복 제거 ▲▲▲ */
    .notification.warning {
        background: linear-gradient(135deg, var(--warning), #fbbf24);
    }

    .notification.warning::before {
        content: '⚠️';
    }

    /* === 모달 스타일 === */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
          /* backdrop-filter: blur(8px);  <-- 이 라인을 삭제하거나 주석 처리하세요. */
         display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        animation: fadeInUp 0.3s ease-out;
        transform: translateZ(0); /* <-- 이 라인을 추가하세요! */
        will-change: transform; /* <-- 이 라인을 추가해 주세요! */

    }

    .modal {
        background: white;
        padding: 0;
        border-radius: var(--radius-lg);
        width: 90%;
        max-width: 400px;
        max-height: 80vh; /* 모달 전체의 최대 높이 */
        box-shadow: var(--shadow-xl);
        animation: slideInRight 0.3s ease-out;

        /* 추가 및 수정: Flexbox를 사용하여 내부 콘텐츠 레이아웃 제어 */
        display: flex; /* Flex 컨테이너로 지정 */
        flex-direction: column; /* 자식 요소들을 세로로 정렬 */
        overflow: hidden; /* 모달 전체는 숨김으로 유지 (내부 바디에서 스크롤 처리) */
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid var(--gray-200);
        background: linear-gradient(135deg, var(--gray-50), white);
        flex-shrink: 0; /* 헤더는 크기가 줄어들지 않도록 고정 */
    }

    .modal-header h3 {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--text-primary);
    }

    .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-secondary);
        width: 2rem;
        height: 2rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
    }

    .modal-close:hover {
        background: var(--gray-100);
        color: var(--text-primary);
    }

    .modal-body {
        padding: 1.5rem;
        /* 추가: 남은 공간을 채우고, 내용이 넘치면 스크롤바 생성 */
        flex-grow: 1; /* flex 컨테이너 내에서 남은 공간을 모두 차지 */
        overflow-y: auto; /* 세로 스크롤바 자동 생성 */
        -webkit-overflow-scrolling: touch; /* iOS에서 스크롤 부드럽게 */
    }

    .modal-footer {
        padding: 1rem 1.5rem 1.5rem;
        display: flex;
        justify-content: flex-end;
        gap: 0.75rem;
        border-top: 1px solid var(--gray-200);
        background: var(--gray-50);
        flex-shrink: 0; /* 푸터는 크기가 줄어들지 않도록 고정 */
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: var(--radius);
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        min-height: var(--touch-target-min);
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
    }

    .btn:active {
        transform: scale(0.98);
    }

    .btn-secondary {
        background: var(--gray-200);
        color: var(--text-primary);
    }

    .btn-secondary:hover {
        background: var(--gray-300);
    }

    /* === 스테퍼 모달 스타일 === */
    .stepper-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        margin: 2rem 0;
    }

    .stepper-btn {
        width: 60px;
        height: 60px;
        border: 2px solid var(--primary);
        background: white;
        color: var(--primary);
        border-radius: 50%;
        font-size: 1.5rem;
        font-weight: 700;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        user-select: none;
    }

    .stepper-btn:hover:not(:disabled) {
        background: var(--primary);
        color: white;
        transform: scale(1.1);
    }

    .stepper-btn:active:not(:disabled) {
        transform: scale(0.95);
    }

    .stepper-btn:disabled {
        opacity: 0.3;
        cursor: not-allowed;
        transform: none;
    }

    .stepper-value {
        font-size: 3rem;
        font-weight: 800;
        color: var(--primary);
        min-width: 120px;
        text-align: center;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stepper-unit {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-left: 0.5rem;
    }

    /* === 휠 모달 스타일 === */
    .number-wheel-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1rem;
    }

    .number-wheel {
        width: 200px;
        height: 200px;
        overflow: hidden;
        position: relative;
        background: linear-gradient(145deg, #f8fafc, #f1f5f9);
        border-radius: var(--radius);
        border: 2px solid var(--gray-200);
    }

    .number-wheel-scroll {
        height: 100%;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
        scrollbar-width: none;
        -ms-overflow-style: none;
        padding: 80px 0;
    }

    .number-wheel-scroll::-webkit-scrollbar {
        display: none;
    }

    .number-option {
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        font-weight: 600;
        scroll-snap-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: var(--gray-500);
    }

    .number-option.active {
        color: var(--primary);
        background: rgba(99, 102, 241, 0.1);
        transform: scale(1.1);
        font-weight: 800;
    }

    .number-option:hover {
        background: var(--gray-100);
        color: var(--text-primary);
    }

    .wheel-indicator {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 40px;
        border-top: 2px solid var(--primary);
        border-bottom: 2px solid var(--primary);
        background: rgba(99, 102, 241, 0.05);
        pointer-events: none;
        transform: translateY(-50%);
    }

    /* === 관리 페이지 - 순서 조정 스타일 === */
    .manage-routine-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .manage-routine-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 18px;
        background-color: white;
        border-radius: var(--radius);
        box-shadow: var(--shadow-sm);
        border: 1px solid var(--gray-200);
        min-height: var(--touch-target-min);
        cursor: grab;
        transition: all 0.3s ease;
    }

    .manage-routine-item:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
        border-color: var(--primary);
    }

    .manage-routine-item.sortable-drag {
        opacity: 0.6;
        transform: rotate(5deg);
        cursor: grabbing;
    }

    .manage-routine-item.sortable-ghost {
        opacity: 0.3;
        background-color: var(--gray-100);
    }

    .routine-info-wrapper {
        display: flex;
        align-items: center;
        flex-grow: 1;
        cursor: pointer;
    }

    .drag-handle {
        cursor: grab;
        color: var(--gray-400);
        margin-right: 15px;
        font-size: 1.2rem;
        padding: 8px;
        border-radius: 4px;
        transition: all 0.2s ease;
    }

    .drag-handle:hover {
        color: var(--primary);
        background-color: var(--gray-100);
    }

    .manage-routine-item:active .drag-handle {
        cursor: grabbing;
    }

    .routine-main-info {
        flex-grow: 1;
    }

    .routine-main-name {
        font-weight: 600;
        font-size: 1.05rem;
        color: var(--text-primary);
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .routine-main-details {
        font-size: 0.8rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .routine-type-badge {
        background: rgba(236, 72, 153, 0.1);
        color: var(--secondary);
        padding: 0.125rem 0.5rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 0.7rem;
    }

    .routine-controls {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .routine-toggle {
        position: relative;
        display: inline-block;
        width: 44px;
        height: 24px;
    }

    .routine-toggle input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--gray-300);
        transition: 0.3s;
        border-radius: 24px;
    }

    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 18px;
        width: 18px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.3s;
        border-radius: 50%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .routine-toggle input:checked + .toggle-slider {
        background-color: var(--primary);
    }

    .routine-toggle input:checked + .toggle-slider:before {
        transform: translateX(20px);
    }

    .edit-btn {
        background: var(--gray-100);
        color: var(--text-secondary);
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.8rem;
        transition: all 0.2s ease;
        min-height: 32px;
    }

    .edit-btn:hover {
        background: var(--gray-200);
        color: var(--text-primary);
    }

    /* 순서 저장 버튼 */
    .save-order-btn {
        background: linear-gradient(135deg, var(--primary), var(--primary-dark));
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: var(--radius);
        font-size: 0.9rem;
        font-weight: 600;
        cursor: pointer;
        margin-top: 1rem;
        display: none;
        transition: all 0.3s ease;
    }

    .save-order-btn.show {
        display: block;
        animation: fadeInUp 0.3s ease-out;
    }

    .save-order-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
    }

    /* === 폼 스타일 === */
    .routine-form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .form-group label {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.9rem;
    }

    .form-group input,
    .form-group select {
        padding: 0.75rem;
        border: 2px solid var(--gray-200);
        border-radius: var(--radius);
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
    }

    .form-group input:focus,
    .form-group select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .form-group input:invalid,
    .form-group select:invalid {
        border-color: var(--error);
    }

    .hidden-options {
        display: none;
        background: var(--gray-50);
        padding: 1rem;
        border-radius: var(--radius);
        border: 1px solid var(--gray-200);
    }

    .hidden-options.show {
        display: block;
        animation: fadeInUp 0.3s ease-out;
    }

    .form-row {
        display: flex;
        gap: 1rem;
    }

    .form-row .form-group {
        flex: 0 1 auto; /* flex: 1; 대신 이 값으로 변경 */
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }

    .form-actions .btn {
        flex: 1;
    }

    /* 페이지 전환 버튼 */
    .navigation-buttons {
        position: fixed;
        bottom: 20px;
        right: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        z-index: 100;
    }

    .nav-btn {
        padding: 10px 15px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        min-height: var(--touch-target-min);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: var(--shadow-lg);
        font-size: 0.9rem;
    }

    .nav-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl);
    }

    .nav-btn.home {
        background: var(--primary);
        color: white;
    }

    .nav-btn.manage {
        background: var(--secondary);
        color: white;
    }

    .nav-btn.add {
        background: var(--success);
        color: white;
    }

    .nav-btn.stats {
        background: var(--warning);
        color: white;
    }

    /* === 독서 모달 스타일 === */
    .reading-summary {
        background: var(--gray-50);
        padding: 1rem;
        border-radius: var(--radius);
        margin-top: 1rem;
        border: 1px solid var(--gray-200);
    }

    .reading-summary h4 {
        margin: 0 0 0.75rem 0;
        color: var(--text-primary);
        font-size: 1rem;
    }

    .summary-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .summary-item:last-child {
        margin-bottom: 0;
        font-weight: 600;
        color: var(--primary);
    }

    .reading-info {
        background: linear-gradient(135deg, #fef3c7, #fde68a);
        padding: 1rem;
        border-radius: var(--radius);
        margin-bottom: 1rem;
        border: 1px solid var(--warning);
    }

    .reading-info h4 {
        margin: 0 0 0.5rem 0;
        color: var(--text-primary);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .reading-info p {
        margin: 0.25rem 0;
        font-size: 0.9rem;
        color: var(--text-secondary);
    }

    .reading-progress-info {
        background: var(--gray-50);
        padding: 1rem;
        border-radius: var(--radius);
        margin-top: 1rem;
        border: 1px solid var(--gray-200);
    }

    .progress-preview {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .progress-preview.highlight {
        font-weight: 600;
        color: var(--primary);
    }

    /* 독서 설정 모달 내의 시작/끝 페이지 입력 필드 자체의 폭 강제 조절 */
    #readingSetupModal .form-row .form-group input[type="number"] {
        width: 100px !important; /* 원하는 너비로 설정 (예: 100px) */
        max-width: 100px !important; /* 혹시 모를 max-width 제한도 함께 */
        box-sizing: border-box; /* 패딩과 보더가 너비에 포함되도록 설정 (권장) */
    }

    /* === 5대 영역 통계 섹션 스타일 === */
    .area-stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 1rem;
        margin-top: 1.5rem;
    }

    .area-stat-item {
        background: linear-gradient(145deg, #f0f9ff, #e0f2fe);
        padding: 1rem;
        border-radius: var(--radius);
        box-shadow: var(--shadow-sm);
        text-align: center;
        border: 1px solid var(--gray-200);
        transition: all 0.3s ease;
    }

    .area-stat-item:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-md);
        border-color: var(--primary);
    }

    .area-stat-item.physical { background: linear-gradient(145deg, #e0f2f7, #b2ebf2); border-color: #00bcd4; }
    .area-stat-item.mental { background: linear-gradient(145deg, #f3e5f5, #e1bee7); border-color: #9c27b0; }
    .area-stat-item.intellectual { background: linear-gradient(145deg, #e8f5e9, #c8e6c9); border-color: #4caf50; }
    .area-stat-item.relational { background: linear-gradient(145deg, #fff3e0, #ffe0b2); border-color: #ff9800; }
    .area-stat-item.productivity { background: linear-gradient(145deg, #e3f2fd, #bbdefb); border-color: #2196f3; }
    /* 추가된 커스텀 영역을 위한 기본 스타일 (필요시 색상 추가) */
    .area-stat-item.customArea1 { background: linear-gradient(145deg, #ffe0e0, #ffc0cb); border-color: #ff69b4; } /* 핑크 계열 */
    .area-stat-item.customArea2 { background: linear-gradient(145deg, #e0ffe0, #c0ffc0); border-color: #00a000; } /* 연두 계열 */


    .area-stat-item h4 {
        font-size: 0.9rem;
        color: var(--text-secondary);
        margin-bottom: 0.5rem;
    }

    .area-stat-item .points {
        font-size: 1.5rem;
        font-weight: 800;
        color: var(--primary);
    }

    /* === 새 루틴 추가 모달 (Add Routine Modal) 스타일 === */
    .area-selection-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 0.75rem;
        margin-top: 0.5rem;
    }

    .area-checkbox-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        background: var(--gray-100);
        padding: 0.75rem;
        border-radius: var(--radius);
        border: 1px solid var(--gray-200);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .area-checkbox-item:hover {
        background: var(--gray-200);
        border-color: var(--primary);
    }

    .area-checkbox-item input[type="checkbox"] {
        width: 18px;
        height: 18px;
        accent-color: var(--primary);
        cursor: pointer;
    }

    .area-checkbox-item label {
        font-size: 0.9rem;
        font-weight: 500;
        color: var(--text-primary);
        flex-grow: 1;
        cursor: pointer;
    }

    /* 새 루틴 추가 모달 내의 form-row 안의 form-group 폭 조절 */
    #addRoutineModal .form-row .form-group {
        /* flex-grow: 1 (공간이 남으면 커짐), flex-shrink: 1 (공간이 부족하면 줄어듦), flex-basis: 48% (기본 너비) */
        flex: 1 1 48% !important; 
    }

    /* (선택 사항) input/select 요소가 부모 너비를 꽉 채우도록 보장 */
    #addRoutineModal .form-row .form-group input,
    #addRoutineModal .form-row .form-group select {
        width: 100% !important; /* 부모 form-group의 너비를 꽉 채움 */
        box-sizing: border-box; /* 패딩과 보더가 너비에 포함되도록 설정 (권장) */
    }


    /* === 영역 관리 모달 (Manage Areas Modal) 스타일 === */
    .manage-areas-list .form-group {
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        border: 1px solid var(--gray-200);
        padding: 0.75rem 1rem;
        border-radius: var(--radius);
        background: var(--gray-50);
        margin-bottom: 0.75rem;
    }

    .manage-areas-list .form-group label {
        flex-shrink: 0;
        margin-right: 1rem;
        font-size: 1rem;
    }

    .manage-areas-list .form-group input {
        flex-grow: 1;
        padding: 0.5rem;
        font-size: 0.9rem;
        border-radius: 6px;
    }

    .manage-areas-list .remove-area-btn {
        background: var(--error);
        color: white;
        border: none;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        cursor: pointer;
        transition: background 0.2s ease;
        margin-left: 0.5rem;
    }

    .manage-areas-list .remove-area-btn:hover {
        background: var(--primary-dark);
    }

    .add-area-button-container {
        text-align: center;
        margin-top: 1.5rem;
    }

    .add-area-button-container .btn {
        background: var(--accent);
    }
    .add-area-button-container .btn:hover {
        background: #0d926b;
    }


    /* 반응형 디자인 */
    @media (max-width: 480px) {
        .routine-header {
            font-size: 1rem; /* 모바일에서만 이름 폰트 살짝 줄임 */
            .container {
                /* 상하 여백은 유지하고, 좌우 여백만 0.75rem (12px)으로 줄입니다. */
                padding-left: 0.75rem;
                padding-right: 0.75rem;
        }
        
/* * 핵심 수정: .routine-content 내부의 자식 요소(.routine-name, .routine-details)들이
         * 항상 수직으로 쌓이도록 flex-direction: column을 명시합니다. 
         */
         .routine-content {
            flex-direction: column; /* 이름을 위로, 상세 정보를 아래로 */
            align-items: flex-start;
            flex-grow: 1; /* 남은 공간을 최대한 활용하도록 합니다. */
            margin-right: 5px; /* 우측 값과의 간격 확보 */
        }
        
        .routine-name {
            display: flex; /* 아이콘과 텍스트를 flex로 유지 */
            align-items: center;
            font-size: 1rem;
            font-weight: 700;
            white-space: normal; /* 텍스트가 길면 줄바꿈 허용 */
            word-break: keep-all; /* 단어가 잘리지 않도록 합니다. */
            margin-bottom: 4px; /* 아래 .routine-details와의 간격 */
            line-height: 1.3; /* 줄 간격을 조절하여 가독성 높임 */
        }
        .type-icon {
            font-size: 1.1rem; /* 아이콘 크기를 약간 키웁니다. */
            margin-right: 6px; /* 아이콘과 텍스트 사이 간격 */
            flex-shrink: 0; /* 아이콘이 줄어들지 않도록 합니다. */
        }
        
        .routine-details {
            display: flex; /* 시간과 빈도를 가로로 배치 */
            flex-wrap: wrap; /* 공간 부족 시 다음 줄로 넘어가도록 허용 */
            font-size: 0.75rem;
            color: var(--text-secondary); /* 보조 정보 색상 */
        }

        .time-period {
            margin-right: 8px; /* 시간과 빈도 사이 간격 */
            white-space: nowrap; /* 시간 정보는 줄바꿈되지 않도록 */
        }

        /* 우측 상단에 배치되는 값 (달성률, 시간 등) */
        .routine-value {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            white-space: nowrap;
        }
        

        .manage-routine-item {
            padding: 14px;
        }

        .routine-main-name {
            font-size: 1rem;
        }

        .routine-main-details {
            font-size: 0.75rem;
        }

        .routine-controls {
            gap: 0.5rem;
        }

        .area-selection-grid {
            grid-template-columns: 1fr; /* 모바일에서는 한 줄에 하나씩 */
        }
    }

    /* ✨ 대시보드 스타일 새로 추가 시작 ✨ */

/* ▼▼▼ 기존의 모든 page-container스타일을 삭제하고 아래 코드로 교체하세요 ▼▼▼ */
.page-container {
    display: none; 
    animation: fadeInUp 0.5s;
}

.page-container.active {
    display: block;
}

/* 2. 사령관님께서 지적하신 누락된 핵심 스타일 (복원) */
#stats-page h2, #goal-page h2, #rewards-page h2, #manage-page h2 {
    margin-bottom: 0.5rem !important;
}

#stats-page .grid, #goal-page .grid, #rewards-page .grid, #manage-page .grid {
    margin-bottom: 2rem;
}

/* 차트 컨테이너 반응형 */
#stats-page canvas {
    max-height: 300px;
}


/* ▲▲▲ 여기까지 교체 ▲▲▲ */
    .progress-bar-container { /* Specificity for dashboard's progress bar */
        width: 100%;
        background-color: #e5e7eb; /* gray-200 */
        border-radius: 9999px; /* rounded-full */
        height: 1.25rem; /* h-5 */
        overflow: hidden;
    }
     .progress-bar-fill { /* Specificity for dashboard's progress bar */
        height: 100%;
        background-color: #22c55e; /* green-500 */
        border-radius: 9999px; /* rounded-full */
        transition: width 0.5s ease-in-out;
    }
    .tab-button {
        flex: 1;
        padding: 1rem; /* py-4 */
        font-size: 1.125rem; /* text-lg */
        font-weight: 600; /* font-semibold */
        color: #6b7280; /* gray-600 */
        border: none;
        background-color: transparent;
        cursor: pointer;
        transition: color 0.2s, border-bottom 0.2s;
        border-bottom: 3px solid transparent;
    }
    .tab-button:hover {
        color: #3b82f6; /* blue-500 */
    }
    .tab-button.active {
        background-color: #ffffff;
        color: #3b82f6; /* blue-500 */
        border-bottom: 3px solid #3b82f6;
    }
    .tab-content {
        display: none;
    }
    .tab-content.active {
        display: block;
    }
    /* ✨ 대시보드 스타일 새로 추가 끝 ✨ */
    /* 기존 CSS 코드 맨 아래에 추가 */
    .delete-btn {
        background: var(--gray-100);
        color: var(--error);
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.8rem;
        font-weight: 600;
        transition: all 0.2s ease;
        min-height: 32px;
    }

    .delete-btn:hover {
        background: var(--error);
        color: white;
        box-shadow: var(--shadow-md);
    }

    .stats-btn {
        background: var(--gray-100);
        color: var(--primary);
        border: none;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.8rem;
        font-weight: 600;
        transition: all 0.2s ease;
        min-height: 32px;
    }
    
    .stats-btn:hover {
        background: var(--primary);
        color: white;
        box-shadow: var(--shadow-md);
    }

    .filter-btn {
        padding: 8px 16px;
        border: 1px solid var(--gray-300);
        border-radius: 9999px;
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--gray-600);
        background-color: white;
        transition: all 0.2s ease;
    }
    .filter-btn.active, .filter-btn:hover {
        background-color: var(--primary);
        color: white;
        border-color: var(--primary);
    }

    /* 통계 페이지 반응형 개선 */


.page-containerh2 {
margin-bottom: 0.5rem !important;
}

.page-container.grid {
margin-bottom: 2rem;
}

/* 차트 컨테이너 반응형 */
.page-containercanvas {
max-height: 300px;
}

/* 모바일 반응형 스타일 */
@media (max-width: 480px) {
    #home-page, #goal-page, #stats-page, #rewards-page, #manage-page {
        padding: 1rem !important;
    }

    #stats-page h1, #goal-page h1, #rewards-page h1, #manage-page h1 {
        font-size: 1.5rem !important;
        margin-bottom: 1rem !important;
    }

    #stats-page h2, #goal-page h2, #rewards-page h2, #manage-page h2 {
        font-size: 1.1rem !important;
    }

    #stats-page .grid, #goal-page .grid, #rewards-page .grid, #manage-page .grid {
        grid-template-columns: 1fr !important;
    }
}
/* ▲▲▲ 여기까지 2025-08-24(수정일) 페이지 구조 재설계 및 누락 스타일 복원 ▲▲▲ */


/* ▼▼▼ feat(heatmap): 365일 일별 히트맵을 52주 주별 히트맵으로 개선하여 가독성 향상 ▼▼▼ */
.simple-heatmap {
padding: 1.5rem;
background: #f9fafb;
border-radius: 12px;
border: 1px solid #e5e7eb;
}

.heatmap-title {
font-size: 1rem;
font-weight: 600;
color: #374151;
margin-bottom: 1rem;
text-align: center;
}

/* 주별 히트맵 그리드 */
.weekly-heatmap-grid {
display: grid;
grid-template-columns: repeat(13, 1fr); /* 13주씩 4줄 = 52주 */
gap: 8px;
margin-bottom: 1.5rem;
justify-items: center;
}

.weekly-heatmap-cell {
width: 40px;
height: 40px;
border-radius: 8px;
cursor: pointer;
transition: all 0.3s ease;
position: relative;
display: flex;
align-items: center;
justify-content: center;
border: 1px solid rgba(0,0,0,0.1);
}

.weekly-heatmap-cell:hover {
transform: scale(1.1);
z-index: 10;
box-shadow: 0 4px 12px rgba(0,0,0,0.15);
border-color: #6366f1;
}

.weekly-heatmap-cell:hover::after {
content: attr(title);
position: absolute;
bottom: 120%;
left: 50%;
transform: translateX(-50%);
background: #1f2937;
color: white;
padding: 6px 10px;
border-radius: 6px;
font-size: 11px;
white-space: nowrap;
z-index: 20;
box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.weekly-heatmap-cell:hover::before {
content: '';
position: absolute;
bottom: 110%;
left: 50%;
transform: translateX(-50%);
border: 4px solid transparent;
border-top-color: #1f2937;
z-index: 20;
}

.week-number {
font-size: 11px;
font-weight: 600;
color: #374151;
}

/* 강도별 색상 */
.heatmap-cell-0 { 
background-color: #f3f4f6; 
}
.heatmap-cell-0 .week-number { color: #9ca3af; }

.heatmap-cell-1 { 
background-color: #dcfce7; 
border-color: #bbf7d0;
}
.heatmap-cell-1 .week-number { color: #166534; }

.heatmap-cell-2 { 
background-color: #bbf7d0; 
border-color: #86efac;
}
.heatmap-cell-2 .week-number { color: #166534; }

.heatmap-cell-3 { 
background-color: #86efac; 
border-color: #4ade80;
}
.heatmap-cell-3 .week-number { color: #14532d; }

.heatmap-cell-4 { 
background-color: #22c55e; 
border-color: #16a34a;
}
.heatmap-cell-4 .week-number { color: white; }

/* 범례 스타일 */
.heatmap-legend {
display: flex;
align-items: center;
justify-content: center;
gap: 6px;
font-size: 0.75rem;
color: #6b7280;
}

.legend-label {
font-weight: 600;
margin-right: 4px;
}

.legend-text {
margin: 0 2px;
}

.legend-cell {
width: 12px;
height: 12px;
border-radius: 2px;
border: 1px solid rgba(0,0,0,0.1);
}

/* 모바일 반응형 */
@media (max-width: 640px) {
.weekly-heatmap-grid {
    grid-template-columns: repeat(10, 1fr); /* 모바일에서는 10주씩 */
    gap: 4px;
}

.weekly-heatmap-cell {
    width: 28px;
    height: 28px;
}

.week-number {
    font-size: 9px;
}

.simple-heatmap {
    padding: 1rem;
}
}

@media (max-width: 480px) {
.weekly-heatmap-grid {
    grid-template-columns: repeat(8, 1fr); /* 작은 화면에서는 8주씩 */
}

.weekly-heatmap-cell {
    width: 24px;
    height: 24px;
}

.week-number {
    font-size: 8px;
}
}
/* ▲▲▲ 여기까지 교체 ▲▲▲ */

/* 현재 주차 강조 스타일 */
.weekly-heatmap-cell.current-week {
border: 2px solid #6366f1 !important;
box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
animation: pulse-current 2s infinite;
}

.weekly-heatmap-cell.current-week .week-number {
font-weight: 800;
}

@keyframes pulse-current {
0%, 100% {
    box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}
50% {
    box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.4);
}
}

/* 주차 번호 표시 개선 */
.week-number {
font-size: 10px;
font-weight: 600;
color: #374151;
text-align: center;
line-height: 1;
}

/* 작년 주차 구분 */
.weekly-heatmap-cell[data-year]:not([data-year="2025"]) {
opacity: 0.7;
}

.weekly-heatmap-cell[data-year]:not([data-year="2025"]) .week-number {
font-size: 8px;
}

/* ▲▲▲ 여기까지 추가 ▲▲▲ */

/* ▼▼▼ 모달 푸터와 삭제 버튼 스타일을 추가하세요: ▼▼▼ */

/* 모달 푸터 레이아웃 개선 */
.modal-footer {
padding: 1rem 1.5rem 1.5rem;
display: flex;
justify-content: space-between;
align-items: center;
border-top: 1px solid var(--gray-200);
background: var(--gray-50);
flex-shrink: 0;
}

.footer-left {
flex: 1;
}

.footer-right {
display: flex;
gap: 0.75rem;
}

/* 삭제 버튼 스타일 */
.btn-danger {
background: linear-gradient(135deg, #ef4444, #dc2626);
color: white;
border: 1px solid #dc2626;
transition: all 0.3s ease;
}

.btn-danger:hover {
background: linear-gradient(135deg, #dc2626, #b91c1c);
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

.btn-danger:active {
transform: scale(0.98);
}

/* 기존 routine-controls 스타일 개선 */
.routine-controls {
display: flex;
align-items: center;
gap: 0.75rem; /* 간격 조정 */
}

/* 모바일에서 버튼 크기 조정 */
@media (max-width: 480px) {
.routine-controls {
    gap: 0.5rem;
}

.stats-btn, .edit-btn {
    padding: 6px 10px;
    font-size: 0.75rem;
    min-height: 28px;
}

.modal-footer {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
}

.footer-left, .footer-right {
    width: 100%;
}

.footer-right {
    justify-content: flex-end;
}
}

/* ▲▲▲ 여기까지 추가 ▲▲▲ */
/* ▼▼▼ refactor(modal): 수정/추가 버튼의 모호한 선택자를 명확한 클래스로 변경하여 버그 수정 ▼▼▼ */
.btn-danger {
background: linear-gradient(135deg, #ef4444, #dc2626);
color: white;
border: 1px solid #dc2626;
transition: all 0.3s ease;
}

.btn-danger:hover {
background: linear-gradient(135deg, #dc2626, #b91c1c);
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
}

.btn-danger:active {
transform: scale(0.98);
}
/* ▲▲▲ 여기까지 추가 ▲▲▲ */
/* ▼▼▼ 여기에 새 코드를 추가하세요 (목표 카드 스타일) ▼▼▼ */
.goal-card {
background: #ffffff;
border: 1px solid var(--gray-200);
border-radius: 12px;
padding: 1rem;
box-shadow: var(--shadow-sm);
}
.goal-card-header {
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:0.5rem;
}
.goal-progress-wrap {
display:flex;
align-items:center;
gap:1rem;
margin-top:0.75rem;
}
.goal-meter {
width: 72px;
height: 72px;
border-radius: 50%;
background: conic-gradient(#22c55e var(--deg, 0deg), #e5e7eb 0deg);
display:flex;
align-items:center;
justify-content:center;
font-weight:800;
color:#111827;
}
/* ▲▲▲ 여기까지 추가 ▲▲▲ */

/* ▼▼▼ 08/09(수정일) 목표 모달 입력창 크기 조절 ▼▼▼ */
/* '새 목표 설정' 모달 내의 form-row 안의 form-group 폭 조절 */
#addGoalModal .form-row .form-group {
/* flex-grow: 1, flex-shrink: 1, flex-basis: 48% */
flex: 1 1 48% !important;
}

/* input/select 요소가 부모 너비를 꽉 채우도록 보장 */
#addGoalModal .form-row .form-group input,
#addGoalModal .form-row .form-group select {
width: 100% !important;
box-sizing: border-box; /* 패딩과 보더가 너비에 포함되도록 설정 */
}
/* ▲▲▲ 여기까지 08/09(수정일) 목표함수 추가 ▲▲▲ */
/* ▼▼▼ 08/17(수정일) 독서 루틴 상세 정보 스타일 추가 ▼▼▼ */
.reading-detail-info {
font-size: 0.8rem;
color: var(--text-secondary);
margin-top: 0.5rem;
padding-left: calc(var(--touch-target-min) + 12px); /* 체크박스 공간만큼 여백 */
}

@media (max-width: 480px) {
.reading-detail-info {
    padding-left: calc(var(--touch-target-min) + 12px);
}
}
/* ▲▲▲ 여기까지 08/17(수정일) 독서 루틴 상세 정보 스타일 추가 ▲▲▲ */

/* ▼▼▼ 08/18(수정일) 목표 달성 카드 및 완료 버튼 스타일 추가 ▼▼▼ */
/* 달성된 목표 카드 스타일 */
.goal-card.goal-achieved {
background: linear-gradient(135deg, #fef3c7, #fde68a); /* 금빛 그라데이션 */
border: 2px solid #f59e0b;
box-shadow: 0 0 20px rgba(245, 158, 11, 0.5);
}

/* 완료 처리 버튼 스타일 */
.complete-btn {
background: linear-gradient(135deg, var(--success), #16a34a);
color: white;
border: none;
padding: 8px 12px;
border-radius: 6px;
cursor: pointer;
font-size: 0.8rem;
font-weight: 600;
transition: all 0.2s ease;
}

.complete-btn:hover {
transform: scale(1.05);
box-shadow: var(--shadow-md);
}
/* ▲▲▲ 여기까지 08/18(수정일) 목표 달성 카드 및 완료 버튼 스타일 추가 ▲▲▲ */
/* ▼▼▼ 08/19(수정일) 상단 헤더 및 하단 탭 바 스타일 추가 ▼▼▼ */
/* 상단 헤더 */
.app-header {
    background-color: #fff;
    padding: 10px 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: var(--shadow-md);
    position: fixed;
    top: 0;
    z-index: 100;
    
    /* --- 핵심 수정 --- */
    width: 100%;
    max-width: 480px;
    left: 50%;
    transform: translateX(-50%);
    box-sizing: border-box; /* 패딩이 너비에 포함되도록 설정 */
}

.user-photo { width: 32px; height: 32px; border-radius: 50%; }
.user-name { font-weight: 600; }
.nav-btn-top {
background: none; border: none; font-size: 1.5rem; cursor: pointer;
}

/* 하단 탭 바 */
.bottom-tab-bar {
    display: flex;
    position: fixed;
    bottom: 0;
    background-color: #ffffff;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    z-index: 100;
    
    /* --- 핵심 수정 --- */
    width: 100%;
    max-width: 480px;
    left: 50%;
    transform: translateX(-50%);
    box-sizing: border-box;
}
.tab-item {
flex: 1;
padding: 8px 0;
background: none;
border: none;
cursor: pointer;
font-size: 1.5rem;
color: var(--gray-400);
display: flex;
flex-direction: column;
align-items: center;
gap: 2px;
transition: color 0.2s;
}
.tab-item:hover, .tab-item.active {
color: var(--primary);
}
.tab-label {
font-size: 0.65rem;
font-weight: 600;
}

/* 컨테이너 상단/하단 여백 확보 */
.container {
padding-top: 60px; /* 상단 헤더 높이만큼 */
padding-bottom: 70px; /* 하단 탭 바 높이만큼 */
}
/* ▲▲▲ 여기까지 08/19(수정일) 상단 헤더 및 하단 탭 바 스타일 추가 ▲▲▲ */
/* ▼▼▼ 08/19(수정일) 목표 카드 제목 줄바꿈 방지 ▼▼▼ */
.goal-card-header > div:first-child {
    white-space: nowrap; /* 줄바꿈을 하지 않도록 강제합니다. */
}
/* ▲▲▲ 여기까지 08/19(수정일) 목표 카드 제목 줄바꿈 방지 ▲▲▲ */
/* ▼▼▼ 08/19(수정일) 편집/삭제 버튼 크기 통일 ▼▼▼ */
.edit-btn, .delete-btn {
    min-width: 50px; /* 최소 너비를 50px로 설정합니다. */
    text-align: center; /* 텍스트를 중앙 정렬합니다. */
}
/* ▲▲▲ 여기까지 08/19(수정일) 편집/삭제 버튼 크기 통일 ▲▲▲ */
/* ▼▼▼ 08/19(수정일) 목표 페이지 신규 헤더 스타일 추가 ▼▼▼ */
.goal-page-header {
    margin-bottom: 1.5rem;
}

.goal-page-header h1 {
    text-align: center;
    margin-bottom: 1rem;
    font-size: 1.5rem;
}

.goal-page-actions {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
}
/* ▲▲▲ 여기까지 08/19(수정일) 목표 페이지 신규 헤더 스타일 추가 ▲▲▲ */

/* ▼▼▼ 2025-08-21 로그아웃 버튼 스타일 추가 ▼▼▼ */
.btn-logout {
    background-color: var(--gray-200);
    color: var(--text-secondary);
    border: none;
    border-radius: 8px;
    padding: 6px 12px;
    font-size: 0.8rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.2s;
    margin-left: 12px;
}

.btn-logout:hover {
    background-color: var(--gray-300);
    color: var(--text-primary);
}

#user-info {
    display: flex;
    align-items: center;
}
/* ▲▲▲ 여기까지 2025-08-21 로그아웃 버튼 스타일 추가 ▲▲▲ */
/* ▼▼▼ 2025-08-21 루틴 관리 탭 스타일 추가 ▼▼▼ */
.routine-manage-tabs {
    display: flex;
    border-bottom: 2px solid var(--gray-200);
    margin-top: 1.5rem;
    margin-bottom: 1rem;
}

.routine-manage-tabs .tab-btn {
    padding: 0.75rem 1rem;
    border: none;
    background: none;
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-secondary);
    border-bottom: 3px solid transparent;
    transition: all 0.3s ease;
    margin-bottom: -2px; /* 하단 보더와 겹치도록 */
}

.routine-manage-tabs .tab-btn:hover {
    color: var(--primary);
}

.routine-manage-tabs .tab-btn.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
}

.tab-panel {
    display: none;
    animation: fadeInUp 0.4s;
}

.tab-panel.active {
    display: block;
}

.panel-description {
    color: var(--text-secondary); 
    font-size: 0.9rem; 
    margin-bottom: 1rem;
}

.btn-add-routine {
    width: 100%;
    margin-top: 1rem;
    background-color: var(--success);
}

.child-routine-group {
    margin-bottom: 2rem;
}

.child-routine-group h3 {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.75rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--gray-200);
}
/* ▲▲▲ 여기까지 2025-08-21 루틴 관리 탭 스타일 추가 ▲▲▲ */
.reward-controls {
    display: flex;
    gap: 0.5rem; /* 버튼 사이 간격 조정 */
    }
    
    .btn-approve-reward,
    .btn-reject-reward {
    color: white;
    border: none;
    padding: 0.5rem 1rem; /* 패딩 조정 /
    border-radius: 5px; / 둥근 모서리 적용 /
    cursor: pointer;
    font-size: 0.9rem; / 폰트 크기 약간 줄임 /
    transition: opacity 0.3s ease; / 호버 시 부드러운 효과 */
    }
    
    .btn-approve-reward {
    background-color: var(--success); /* 초록색 계열 */
    }
    
    .btn-reject-reward {
    background-color: var(--error); /* 빨간색 계열 */
    }
    
    .btn-approve-reward:hover,
    .btn-reject-reward:hover {
    opacity: 0.8; /* 호버 시 약간 어둡게 */
    }
    
    .manage-routine-item .routine-controls button {
    padding: 0.3rem 0.6rem; /* 기존 아이템 내 버튼과 통일성 유지 */
    font-size: 0.8rem;
    }
    
    .manage-routine-item .routine-controls {
    min-width: 150px; /* 최소 너비 확보 /
    justify-content: flex-end; / 오른쪽 정렬 */
    }
    
    /* 기존의 button 스타일과 충돌 방지 및 우선순위 확보 */
    #reward-approval-section .manage-routine-item .routine-controls button {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    }
    
    #reward-approval-section .manage-routine-item .routine-controls {
    display: flex;
    gap: 0.5rem;
    min-width: auto; /* 필요에 따라 자동 너비 */
    justify-content: flex-end;
    }
    
    /* ▼▼▼ 2025-08-25(수정일) 자녀 페이지 상단 진행률 바 숨김 처리 (정밀 타격) ▼▼▼ */
    #child-page .daily-progress {
    display: none;
    }
/* ▲▲▲ 여기까지 2025-08-25(수정일) 자녀 페이지 상단 진행률 바 숨김 처리 (정밀 타격) ▲▲▲ */
/* ▼▼▼ 2025-08-25(수정일) 고양이 말풍선 스타일 추가 ▼▼▼ */
#companion-cat-container {
    position: relative; /* 말풍선 위치의 기준점이 됨 */
}

.speech-bubble {
    position: absolute;
    bottom: 110px; /* 고양이 이미지 바로 위에 위치 */
    left: 50%;
    transform: translateX(-50%);
    background-color: #ffffff;
    padding: 10px 15px;
    border-radius: 20px;
    border: 2px solid #e5e7eb;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-size: 0.9rem;
    font-weight: 600;
    color: #4b5563;
    width: max-content;
    max-width: 200px;
    text-align: center;
    z-index: 10;
    animation: fadeIn 0.3s ease-out;
}

.speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 10px 10px 0;
    border-style: solid;
    border-color: #ffffff transparent transparent transparent;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, 10px); }
    to { opacity: 1; transform: translate(-50%, 0); }
}
/* ▲▲▲ 여기까지 2025-08-25(수정일) 고양이 말풍선 스타일 추가 ▲▲▲ */