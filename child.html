<!DOCTYPE html>
<html lang="ko">
<head>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
        
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>나의 미션 트래커</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <header class="app-header">
        <div id="user-info" style="display: none;" class="user-info-cluster">
            <img id="user-photo" class="user-photo">
            <span id="user-name" class="user-name"></span>
            <span id="user-points-display" class="frequency-badge" style="background-color: var(--primary); color: white;">✨ 0 P</span>
            <button id="logout-btn" class="btn-logout">로그아웃</button>
        </div>
        <button id="login-btn" class="btn">Google 계정으로 로그인</button>
    </header>

    <div class="container">
        <div id="main-app-content" class="page-container">
            <div class="daily-progress">
                </div>
                <div class="section-card" id="incomplete-section">
                    <h2>📋 오늘의 미션</h2>
                    <div class="routine-list" id="incompleteRoutineList"></div>
                </div>
                
                <div class="section-card" id="inprogress-section" style="display: none;">
                    <h2>🔄 진행 중 미션</h2>
                    <div class="routine-list" id="inprogressRoutineList"></div>
                </div>
                <div class="section-card" id="completed-section" style="display: none;">
                    <h2>✅ 완료한 미션</h2>
                    <div class="routine-list" id="completedRoutineList"></div>
                </div>
                </div>
        
        <div id="rewards-page" class="page-container" style="display: none;">
            <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">🎁 보상 상점</h1>
            
            <div class="section-card" id="point-history-section">
                <h2>✨ 포인트 획득 기록</h2>
                <p class="panel-description">최근에 포인트를 얻은 활동 목록입니다.</p>
                <div id="point-history-list" class="manage-routine-list">
                    </div>
            </div>
            <p class="panel-description" style="text-align: center; margin: 1.5rem 0;">
                열심히 모은 포인트로 원하는 보상을 요청하세요!
            </p>
            
            <div id="reward-store-list" class="routine-list">
                </div>
        </div>
    </div>
    <nav class="bottom-tab-bar">
        <button id="navHomeBtn" class="tab-item active" data-page="home">🏠<span class="tab-label">오늘의 미션</span></button>
        <button id="navRewardsBtn" class="tab-item" data-page="rewards">🎁<span class="tab-label">보상 상점</span></button>
    </nav>
    <div id="numberInputModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="numberModalTitle">숫자 입력</h3>
                <button id="numberModalClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 1rem;">
                    <label for="numberInput" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">값을 입력하세요:</label>
                    <input type="number" id="numberInput" 
                           style="width: 100%; padding: 0.75rem; border: 2px solid var(--gray-200); border-radius: var(--radius); font-size: 1rem;"
                           step="0.1" min="0" placeholder="숫자를 입력하세요">
                </div>
            </div>
            <div class="modal-footer">
                <button id="numberModalCancel" class="btn btn-secondary">취소</button>
                <button id="numberConfirmBtn" class="btn btn-confirm">확인</button>
            </div>
        </div>
    </div>
    <div id="timeInputModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="timeModalTitle">시간 입력</h3>
                <button id="timeModalClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 1rem;">
                    <label for="timeInput" style="display: block; margin-bottom: 0.5rem; font-weight: 600;">시간을 선택하세요:</label>
                    <input type="time" id="timeInput" 
                           style="width: 100%; padding: 0.75rem; border: 2px solid var(--gray-200); border-radius: var(--radius); font-size: 1rem;">
                </div>
            </div>
            <div class="modal-footer">
                <button id="timeModalCancel" class="btn btn-secondary">취소</button>
                <button id="timeConfirmBtn" class="btn btn-confirm">확인</button>
            </div>
        </div>
    </div>
    <div id="stepperInputModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="stepperModalTitle">값 입력</h3>
                <button id="stepperModalClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="stepper-container">
                    <button id="stepperMinus" class="stepper-btn">−</button>
                    <div style="text-align: center;">
                        <span id="stepperValue" class="stepper-value">1</span>
                        <span id="stepperUnit" class="stepper-unit">잔</span>
                    </div>
                    <button id="stepperPlus" class="stepper-btn">+</button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="stepperModalCancel" class="btn btn-secondary">취소</button>
                <button id="stepperConfirmBtn" class="btn btn-confirm">확인</button>
            </div>
        </div>
    </div>
    <div id="readingSetupModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="readingSetupTitle">📚 독서 루틴 수정</h3>
                <button id="readingSetupClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="bookTitle">책 제목</label>
                    <input type="text" id="bookTitle" placeholder="예: JavaScript 완벽 가이드" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="startPage">시작 페이지</label>
                        <input type="number" id="startPage" min="1" value="1" required>
                    </div>
                    <div class="form-group">
                        <label for="endPage">끝 페이지</label>
                        <input type="number" id="endPage" min="1" placeholder="500" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="dailyPages">일일 목표 (페이지)</label>
                    <input type="number" id="dailyPages" min="1" value="10" required>
                </div>
            </div>
            <div class="modal-footer">
                <button id="readingSetupCancel" class="btn btn-secondary">취소</button>
                <button id="readingSetupConfirm" class="btn btn-confirm">설정 완료</button>
            </div>
        </div>
    </div>
    <div id="readingProgressModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="readingProgressTitle">📖 읽기 완료</h3>
                <button class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="reading-info" id="readingInfo"></div>
                <div class="form-group">
                    <label for="readPages">오늘 읽은 페이지 수</label>
                    <input type="number" id="readPages" min="1" required>
                    <small>권장: <span id="recommendedPages">10</span> 페이지</small>
                </div>
                <div class="reading-summary">
                    <div class="summary-item">
                        <span>완료 예정일:</span>
                        <span id="completionDate">-</span>
                    </div>
                </div>
                </div>
            <div class="modal-footer">
                <button class="btn btn-secondary">취소</button>
                <button class="btn btn-confirm">완료</button>
            </div>
        </div>
    </div>
    <div id="wheelInputModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="wheelModalTitle">값 선택</h3>
                <button id="wheelModalClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div id="wheelContainer" style="position: relative;"></div>
            </div>
            <div class="modal-footer">
                <button id="wheelModalCancel" class="btn btn-secondary">취소</button>
                <button id="wheelConfirmBtn" class="btn btn-confirm">확인</button>
            </div>
        </div>
    </div>
    <div id="addRoutineModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <div class="modal-header">
                <h3>➕ 새 루틴 추가</h3>
                <button id="addRoutineClose" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="newRoutineName">루틴 이름</label>
                    <input type="text" id="newRoutineName" placeholder="예: 아침 독서, 물 8잔 마시기" required>
                </div>
                <div class="form-group">
                    <label for="routineAssignee">담당자</label>
                    <select id="routineAssignee" required></select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="newRoutineTime">시간대</label>
                        <select id="newRoutineTime" required>
                            <option value="morning">아침</option>
                            <option value="afternoon">점심</option>
                            <option value="evening">저녁</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="newRoutineType">루틴 타입</label>
                        <select id="newRoutineType" required>
                            <option value="yesno">체크 (예/아니오)</option>
                            <option value="number">숫자 (수량/횟수)</option>
                            <option value="time">시간 (시각)</option>
                            <option value="reading">독서 (페이지)</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="newRoutineFreq">빈도</label>
                    <select id="newRoutineFreq" required>
                        <option value="daily">매일</option>
                        <option value="weekday">평일</option>
                        <option value="weekend">주말</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>영역 선택 (다중 선택 가능)</label>
                    <div class="area-selection-grid" id="newRoutineAreas"></div>
                </div>
                <div class="form-group">
                    <label for="newRoutinePoints">기본 포인트 (루틴 완료 시)</label>
                    <input type="number" id="newRoutinePoints" min="1" value="10" required>
                </div>
                <div id="newNumberOptions" class="hidden-options">
                    <div class="form-group">
                        <label for="newNumberUnit">단위</label>
                        <input type="text" id="newNumberUnit" placeholder="예: 잔, 걸음, 개">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newNumberMin">최소값</label>
                            <input type="number" id="newNumberMin" value="1">
                        </div>
                        <div class="form-group">
                            <label for="newNumberMax">최대값</label>
                            <input type="number" id="newNumberMax" value="100">
                        </div>
                        <div class="form-group">
                            <label for="newNumberStep">단계</label>
                            <input type="number" id="newNumberStep" value="1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="newNumberGoal">일일 목표 (선택 사항)</label>
                        <input type="number" id="newNumberGoal" placeholder="예: 8 (잔), 10000 (걸음)">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="newNumberContinuous"> 지속 업데이트 가능 (매일 목표 달성 시까지)
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="newNumberInputType">입력 방식</label>
                        <select id="newNumberInputType">
                            <option value="stepper">스테퍼 (± 버튼)</option>
                            <option value="wheel">휠 (스크롤)</option>
                            <option value="simple">간단 숫자 입력</option>
                        </select>
                    </div>
                </div>
                <div id="newReadingOptions" class="hidden-options">
                    <div class="form-group">
                        <label for="newBookTitle">책 제목</label>
                        <input type="text" id="newBookTitle" placeholder="예: JavaScript 완벽 가이드">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="newStartPage">시작 페이지</label>
                            <input type="number" id="newStartPage" min="1" value="1">
                        </div>
                        <div class="form-group">
                            <label for="newEndPage">끝 페이지</label>
                            <input type="number" id="newEndPage" min="1" placeholder="500">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="newDailyPages">일일 목표 (페이지)</label>
                        <input type="number" id="newDailyPages" min="1" value="10">
                    </div>
                </div>
            </div>
<div class="modal-footer">
    <div class="footer-left">
        <button id="deleteRoutineBtn" class="btn btn-danger" style="display: none;">🗑️ 루틴 삭제</button>
    </div>
    <div class="footer-right">
        <button id="addRoutineCancel" class="btn btn-secondary">취소</button>
        <button id="addRoutineConfirm" class="btn btn-confirm">루틴 추가</button>
    </div>
</div>
</div>  
</div>    




    <script>
        // Firebase 초기화 코드
        const firebaseConfig = {
            apiKey: "AIzaSyC6bvEaHsxpLtPv5zM99PmgAwOnRXnhkBM",
            authDomain: "habit-dc62a.firebaseapp.com",
            projectId: "habit-dc62a",
            storageBucket: "habit-dc62a.firebasestorage.app",
            messagingSenderId: "668374525477",
            appId: "1:668374525477:web:ecbecd95ec631fb82cc1cc",
            measurementId: "G-DV5Z9YVTZG"
        };
    
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
    </script>
    <script defer src="child.js"></script>

</body>
</html>